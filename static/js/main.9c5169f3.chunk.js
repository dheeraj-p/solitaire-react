(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,a){e.exports=a(21)},20:function(e,t,a){},21:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(11),l=a.n(r),s=a(1),c=a(2),u=a(5),o=a(4),d=a(6),p=a(12),C=a(8),h=a(7),f=a(3),v=a.n(f),k=(a(19),function(){function e(t,a){Object(s.a)(this,e),this.suite=t,this.number=a,this.opened=!1}return Object(c.a)(e,[{key:"getSuite",value:function(){return this.suite}},{key:"getNumber",value:function(){return this.number}},{key:"open",value:function(){this.opened=!0}},{key:"close",value:function(){this.opened=!1}},{key:"isOpened",value:function(){return this.opened}},{key:"getColor",value:function(){return{heart:"red",spade:"black",diamond:"red",club:"black"}[this.suite]}},{key:"equals",value:function(e){return this.number==e.number&&this.suite==e.suite}},{key:"isAce",value:function(){return 1==this.number}},{key:"isNullCard",value:function(){return 0==this.number}},{key:"isKing",value:function(){return 13==this.number}}]),e}()),b=function(){function e(t){Object(s.a)(this,e),this.cards=t}return Object(c.a)(e,[{key:"getCards",value:function(){return this.cards.map(function(e){return new k(e.getSuite(),e.getNumber())})}},{key:"take",value:function(e){return this.cards.splice(0,e)}},{key:"takeAll",value:function(){return this.cards.splice(0,this.cards.length)}}],[{key:"create",value:function(){var t=v.a.range(1,14),a=v.a.product(["spade","heart","diamond","club"],t).map(function(e){var t=Object(C.a)(e,2),a=t[0],n=t[1];return new k(a,n)});return new e(v.a.shuffle(a))}}]),e}(),m=(a(20),function(e){function t(e){return Object(s.a)(this,t),Object(u.a)(this,Object(o.a)(t).call(this,e))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"isNullCard",value:function(){return 0===this.props.card.getNumber()}},{key:"getUnicode",value:function(){var e=this.props.card;if(!e.isOpened())return 127136;var t=e.getNumber(),a=t>11?t+1:t;return{heart:127152,spade:127136,diamond:127168,club:127184}[e.getSuite()]+a}},{key:"render",value:function(){var e=this.props.card,t=e.isOpened()?e.getColor():"black",a=e.isOpened()?this.props.onClick:this.props.onClickClosedCard,n={color:t},r="card-container";return this.isNullCard()&&(r+=" null-card",n.color="#055b45",a=this.props.nullCardOnClick),this.props.isSelected&&(r+=" selected-card"),i.a.createElement("div",{className:r,style:n,id:this.props.id,onClick:a},String.fromCodePoint(this.getUnicode()))}}]),t}(i.a.Component)),y=function(e){function t(e){return Object(s.a)(this,t),Object(u.a)(this,Object(o.a)(t).call(this,e))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"isPileEmpty",value:function(){return 0==this.props.pile.length}},{key:"render",value:function(){var e=this,t=this.props.pile;if(this.isPileEmpty()){var a=new k("",0);t.push(a)}var n=t.map(function(t){var a="".concat(t.getSuite(),"_").concat(t.getNumber(),"_").concat(e.props.id),n=a==e.props.lastSelectedCard;return i.a.createElement(m,{card:t,key:a,id:a,onClick:e.props.cardOnClick,onClickClosesCard:null,nullCardOnClick:e.props.cardOnClick,isSelected:n})});return i.a.createElement("div",{className:"pile"},n)}}]),t}(i.a.Component),O=function(e){function t(e){return Object(s.a)(this,t),Object(u.a)(this,Object(o.a)(t).call(this,e))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"getCardId",value:function(e){return"".concat(e.getSuite(),"_").concat(e.getNumber(),"_").concat(this.props.id)}},{key:"render",value:function(){var e=this.props.cards,t=v.a.last(e.openedCards),a=v.a.last(e.closedCards),n=this.getCardId(t),r=n==this.props.lastSelectedCard;return i.a.createElement("div",{style:{display:"flex",marginLeft:"45px"}},i.a.createElement("div",{style:{marginRight:"10px"}},i.a.createElement(m,{card:a,onClickClosedCard:this.props.onClickDeck,nullCardOnClick:this.props.onClickEmptyDeck})),i.a.createElement("div",null,i.a.createElement(m,{card:t,id:n,key:n,onClick:this.props.onClickedWastePileOpenedCard,nullCardOnClick:null,isSelected:r})),i.a.createElement("div",null))}}]),t}(i.a.Component),P=function(e){function t(e){return Object(s.a)(this,t),Object(u.a)(this,Object(o.a)(t).call(this,e))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.pile,t=v.a.last(e);return i.a.createElement("div",{style:{marginRight:"10px"}},i.a.createElement(m,{card:t,id:this.props.id,nullCardOnClick:this.props.onClickFoundationPile,onClick:this.props.onClickFoundationPile}))}}]),t}(i.a.Component),g=function(e){function t(e){return Object(s.a)(this,t),Object(u.a)(this,Object(o.a)(t).call(this,e))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.piles.map(function(t,a){return i.a.createElement(P,{pile:t,id:a,key:a,onClickFoundationPile:e.props.onClickFoundationPile})});return i.a.createElement("div",{style:{display:"flex",marginRight:"25px"}},t)}}]),t}(i.a.Component),S=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(o.a)(t).call(this,e))).state={deck:b.create(),lastSelectedCardId:null,wastePileCards:{openedCards:[],closedCards:[]},foundationPiles:[]},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"initializePiles",value:function(){var e=this;this.setState(function(t){for(var a=new Array(7),n=0;n<a.length;n++)a[n]=t.deck.take(n+1),e.openLastCardOfPile(a[n]);return Object(h.a)({},t,{piles:a})})}},{key:"initializeWastePile",value:function(){this.setState(function(e){var t=new k("",0),a=[t],n=[t];return n=n.concat(e.deck.takeAll()),Object(h.a)({},e,{wastePileCards:{openedCards:a,closedCards:n}})})}},{key:"initializeFoundationPiles",value:function(){this.setState(function(e){e.foundationPiles=new Array(4).fill(null).map(function(e){return new Array(1).fill(new k("",0))})})}},{key:"componentWillMount",value:function(){this.initializePiles(),this.initializeWastePile(),this.initializeFoundationPiles()}},{key:"isACardAlreadySelected",value:function(){return null!=this.state.lastSelectedCardId}},{key:"areOfDifferentColors",value:function(e,t){return e.getColor()!==t.getColor()}},{key:"doesCardMatch",value:function(e,t,a){return e.getSuite()==a&&e.getNumber()==t}},{key:"isCardMoveable",value:function(e,t){var a=this.areOfDifferentColors(e,t)&&e.getNumber()==t.getNumber()+1,n=t.isKing(),i=e.isNullCard()&&n;return a||i}},{key:"openLastCardOfPile",value:function(e){var t=v.a.last(e);void 0!=t&&t.open()}},{key:"getIndexOfCardInPile",value:function(e,t){return v.a.findIndex(t,function(t){return e.equals(t)})}},{key:"removeCardsInPileFrom",value:function(e,t){var a=this.getIndexOfCardInPile(e,t);return v.a.remove(t,function(e,t){return t>=a})}},{key:"removeNullCard",value:function(e){var t=new k("",0);v.a.remove(e,function(e){return e.equals(t)})}},{key:"isLastSelectedCardInWastePile",value:function(){return"WASTE_PILE"==this.state.lastSelectedCardSource}},{key:"moveCardFromWastePileTo",value:function(e,t){var a=v.a.last(this.state.wastePileCards.openedCards);this.isCardMoveable(t,a)&&(this.state.wastePileCards.openedCards.pop(),e.push(a),this.removeNullCard(e))}},{key:"isLargeSelectedCardInTableau",value:function(){return!this.isLastSelectedCardInWastePile()}},{key:"canCardBeMovedToFoudationPile",value:function(e,t,a){var n=this.state.piles[t];if(!v.a.last(n).equals(a))return!1;var i=this.state.foundationPiles[e],r=v.a.last(i);if(r.isNullCard()&&a.isAce())return!0;var l=r.getNumber()==a.getNumber()-1,s=r.getSuite()==a.getSuite();return!(!l||!s)}},{key:"moveCardToFoundationFile",value:function(e,t,a){this.setState(function(n){return n.piles[t].pop(),n.foundationPiles[e].push(a),n})}},{key:"onClickFoundationPile",value:function(e){var t=this;if(this.isACardAlreadySelected()&&this.isLargeSelectedCardInTableau()){var a=e.target.id,n=this.state.lastSelectedCardId.split("_"),i=Object(C.a)(n,3),r=i[0],l=i[1],s=i[2],c=this.findCardInTableauPile(s,l,r);this.canCardBeMovedToFoudationPile(a,s,c)&&(this.moveCardToFoundationFile(a,s,c),this.setState(function(e){return t.openLastCardOfPile(e.piles[s]),Object(h.a)({},e,{lastSelectedCardId:null})}))}}},{key:"findCardInTableauPile",value:function(e,t,a){var n=this;return this.state.piles[e].find(function(e){return n.doesCardMatch(e,t,a)})}},{key:"moveCards",value:function(e,t){var a=e.split("_"),n=Object(C.a)(a,3),i=n[0],r=n[1],l=n[2],s=t.split("_"),c=Object(C.a)(s,3),u=c[0],o=c[1],d=c[2],h=Object(p.a)(this.state.piles),f=h[d],v=h[l],k=this.findCardInTableauPile(l,r,i);if(this.isLastSelectedCardInWastePile())return this.moveCardFromWastePileTo(v,k),h;var b=this.findCardInTableauPile(d,o,u);if(!this.isCardMoveable(k,b))return h;this.removeNullCard(v);var m=this.removeCardsInPileFrom(b,f);return h[l]=v.concat(m),this.openLastCardOfPile(f),h}},{key:"onClickTableauCard",value:function(e){var t=e.target.id;if(this.isACardAlreadySelected()){var a=this.state.lastSelectedCardId,n=this.moveCards(t,a);this.setState(function(e){return Object(h.a)({},e,{piles:n,lastSelectedCardId:null})})}else this.setState(function(e){return Object(h.a)({},e,{lastSelectedCardId:t,lastSelectedCardSource:"TABLEAU_PILE"})})}},{key:"onClickDeck",value:function(){this.setState(function(e){var t=e.wastePileCards.closedCards.pop();return t.open(),e.wastePileCards.openedCards.push(t),e})}},{key:"onClickEmptyDeck",value:function(){this.setState(function(e){var t=e.wastePileCards.openedCards,a=t.splice(1,t.length).map(function(e){return e.close(),e}).reverse();return e.wastePileCards.closedCards=e.wastePileCards.closedCards.concat(a),e})}},{key:"onClickedWastePileOpenedCard",value:function(e){this.setState(Object(h.a)({},this.state,{lastSelectedCardId:e.target.id,lastSelectedCardSource:"WASTE_PILE"}))}},{key:"render",value:function(){var e=this,t=this.state.piles;return i.a.createElement("div",null,i.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"120px"}},i.a.createElement(O,{cards:this.state.wastePileCards,lastSelectedCard:this.state.lastSelectedCardId,onClickDeck:this.onClickDeck.bind(this),onClickEmptyDeck:this.onClickEmptyDeck.bind(this),onClickedWastePileOpenedCard:this.onClickedWastePileOpenedCard.bind(this)}),i.a.createElement(g,{piles:this.state.foundationPiles,onClickFoundationPile:this.onClickFoundationPile.bind(this)})),i.a.createElement("div",{className:"tableau"},t.map(function(t,a){return i.a.createElement(y,{pile:t,id:a,key:a,cardOnClick:e.onClickTableauCard.bind(e),lastSelectedCard:e.state.lastSelectedCardId})})))}}]),t}(i.a.Component),j=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement(S,null)}}]),t}(n.Component);l.a.render(i.a.createElement(j,null),document.getElementById("root"))}},[[13,1,2]]]);
//# sourceMappingURL=main.9c5169f3.chunk.js.map